<% form ||= nil %>
<!-- <p data-intro="If answering machine detection is off, any calls answered before 15 seconds of ringing will be immediately connected to a caller. After 15 seconds, the call will be hung up. If answering machine detection is on, the call will ring for up to 30 seconds. If it is answered, the detection system will listen to the call for about two seconds, and connect it to a caller if it is a human. If it is a machine, it will play a message if you have chosen to do so, or hang up." data-step="8">
  <label for="campaign_answering_machine_detect">
    <%= form.check_box :answering_machine_detect, {name: 'campaign[answering_machine_detect]', id: "campaign_answering_machine_detect"} %>
    Automatically detect answering machines
  </label>
</p> -->

<fieldset>
  <legend>Recorded Message Settings</legend>
  <ul>
    <li data-intro="If answering machine detection is off, any calls answered before 15 seconds of ringing will be immediately connected to a caller. After 15 seconds, the call will be hung up. If answering machine detection is on, the call will ring for up to 30 seconds. If it is answered, the detection system will listen to the call for about two seconds, and connect it to a caller if it is a human. If it is a machine, it will play a message if you have chosen to do so, or hang up." data-step="8">
      <label for="campaign_answering_machine_detect" class="inline" style="margin-right: 8px;">
        <%= form.check_box :answering_machine_detect, {name: 'campaign[answering_machine_detect]', id: "campaign_answering_machine_detect"} %>
        Auto-detect whether human or machine answers a call
      </label>
    </li>

    <% if !@campaign.account.recordings.blank? %>
    <li>
      <label for="campaign_use_recordings">
        When a machine is detected
      </label>
      <%= form.select :use_recordings, [["Hang-up", "false"], ["Drop message", "true"]], {}, {id: 'campaign_use_recordings', name: 'campaign[use_recordings]'} %>
    </li>

    <li>
      <label for="campaign_caller_can_drop_message_manually">
        <%= form.check_box :caller_can_drop_message_manually, {name: 'campaign[caller_can_drop_message_manually]', id: 'campaign_caller_can_drop_message_manually'} %>
        Callers can click to drop recorded message after a call is answered
      </label>
    </li>

    <li>
      <label for="campaign_call_back_after_voicemail_delivery">
        After a message is dropped
      </label>
      <%= form.select :call_back_after_voicemail_delivery, [["Do not call back", "false"], ["Call back", "true"]], {}, {id: 'campaign_call_back_after_voicemail_delivery', name: 'campaign[call_back_after_voicemail_delivery]'} %>
    </li>

    <li>
      <div id="recordingsdiv">
        <p>
          <label for="campaign_recording_id">
            Message
          </label>

          <%= form.collection_select(:recording_id, @account.recordings.active, :id, :name, {:prompt => false}, {:class=>"field", :onchange=>"updatePreview();",name: 'campaign[recording_id]', id: "campaign_recording_id"}) %>
        </p>

        <div id="sndPreview"></div>

        <%= render partial: 'javascript' %>
      </div>
    </li>
    <% end %>
  </ul>

  <% if !@campaign.new_record? %>
  <p class="actions">
    <a href='/client/recording_add?campaign_id=<%= @campaign.id %>' class="action secondary">Add recording</a>
  </p>
<% end %>

</fieldset>
