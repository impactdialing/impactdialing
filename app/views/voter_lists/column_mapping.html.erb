<% if @csv_validator.errors.any? %>
<div class="callout alert clearfix">
  <% @csv_validator.errors.each do |error| %>
  <p><strong><%= error %></strong></p>
  <% end %>
</div>
<% else %>
  <p>Please map your headers to the appropriate fields below.</p>
  <table>
    <tr>
      <th>Header from your spreadsheet</th>
      <th>Field in the dialer</th>
      <th>Example data</th>
    </tr>
    <% @csv_validator.csv_column_headers.each_with_index do |csv_header, index| %>
      <% selected = selected_system_or_custom_header_for(csv_header, @campaign.account) %>
      <tr>
        <td><%= csv_header %></td>
        <td><%= select_tag "voter_list[csv_to_system_map[#{csv_header}]]",
        options_for_select(system_column_headers(csv_header, @campaign.account), selected),
        class: "select-column-mapping" %></td>
        <td><%= @csv_validator.first_row[index] %></td>
      </tr>
    <% end %>
  </table>
<% end %>
